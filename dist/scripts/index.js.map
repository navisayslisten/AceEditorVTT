{"version":3,"sources":["webpack://ace-editor-vtt/./src/scripts/ace-themes.js","webpack://ace-editor-vtt/./src/scripts/index.js","webpack://ace-editor-vtt/./src/scripts/settings.js","webpack://ace-editor-vtt/webpack/bootstrap","webpack://ace-editor-vtt/webpack/runtime/define property getters","webpack://ace-editor-vtt/webpack/runtime/hasOwnProperty shorthand","webpack://ace-editor-vtt/webpack/runtime/make namespace object","webpack://ace-editor-vtt/webpack/startup"],"names":["themes","createAceConfigHook","id","editor","Hooks","once","aceConfig","destroy","on","configElement","element","enabled","game","settings","get","fontSize","theme","autoCompleteState","find","append","object","css","String","console","error","Number","furnace","length","ace","edit","setOptions","mode","showPrintMargin","foldStyle","enableBasicAutocompletion","enableSnippets","enableLiveAutocompletion","getSession","setUseWrapMode","event","preventDefault","setValue","val","trigger","getValue","commands","addCommand","name","bindKey","win","mac","exec","ResizeObserver","resize","renderer","updateFull","observe","container","aevtt","CONFIG","debug","AceSettings","FormApplication","register","type","Boolean","hint","scope","config","default","options","data","super","getData","this","getSettingsData","html","activateListeners","ev","formData","expandObject","key","value","Object","entries","set","then","vtt","__webpack_module_cache__","__webpack_require__","moduleId","exports","module","__webpack_modules__","d","definition","o","defineProperty","enumerable","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag"],"mappings":"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","file":"index.js","sourcesContent":["export const themes = [\r\n    'ambiance',\r\n    'chaos',\r\n    'chrome',\r\n    'clouds',\r\n    'clouds_midnight',\r\n    'cobalt',\r\n    'crimson_editor',\r\n    'dawn',\r\n    'dracula',\r\n    'dreamweaver',\r\n    'eclipse',\r\n    'github',\r\n    'gob',\r\n    'gruvbox',\r\n    'idle_fingers',\r\n    'iplastic',\r\n    'katzenmilch',\r\n    'kr_theme',\r\n    'kuroir',\r\n    'merbivor',\r\n    'merbivor_soft',\r\n    'mono_industrial',\r\n    'monokai',\r\n    'nord_dark',\r\n    'pastel_on_dark',\r\n    'solarized_dark',\r\n    'solarized_light',\r\n    'sqlserver',\r\n    'terminal',\r\n    'textmate',\r\n    'tomorrow',\r\n    'tomorrow_night',\r\n    'tomorrow_night_blue',\r\n    'tomorrow_night_bright',\r\n    'tomorrow_night_eighties',\r\n    'twilight',\r\n    'vibrant_ink',\r\n    'xcode'\r\n]","import {AceSettings} from \"./settings\";\r\nimport {themes} from \"./ace-themes\";\r\n\r\nHooks.on(\"renderMacroConfig\", function (aceConfig) {\r\n    const configElement = aceConfig.element;\r\n    const enabled = game.settings.get('aevtt', 'enabled');\r\n    const fontSize = game.settings.get('aevtt', 'fontSize');\r\n    const theme = game.settings.get('aevtt', 'theme');\r\n    const autoCompleteState = game.settings.get('aevtt', 'autoComplete');\r\n\r\n    configElement\r\n        .find(\".command\")\r\n        .append(\r\n            `<div class=\"ace-editor\" id=\"aceEditor-${aceConfig.object.id}\"></div>`\r\n        );\r\n\r\n    if (!enabled) {\r\n        configElement.find(\".ace-editor\").css(\"display\", \"none\");\r\n        return;\r\n    }\r\n\r\n    if (!theme instanceof String || !themes.includes(theme)) {\r\n        console.error(`Theme: '${theme}' does not exist.`);\r\n        return;\r\n    }\r\n\r\n    if (!fontSize instanceof Number || fontSize <= 0) {\r\n        console.error(`Invalid fontSize: ${fontSize}`);\r\n        return;\r\n    }\r\n\r\n    configElement.find('.command textarea[name=\"command\"]').css(\"display\", \"none\");\r\n\r\n    // furnace compat\r\n    const furnace = configElement.find(\"div.furnace-macro-command\");\r\n    if (furnace.length !== 0) {\r\n        furnace.css(\"display\", \"none\");\r\n    }\r\n\r\n    configElement\r\n        .find(\".sheet-footer\")\r\n        .append('<button type=\"button\" class=\"ace-editor-button\" title=\"Toggle Ace Editor\" name=\"editorButton\"><i class=\"fas fa-terminal\"></i></button>');\r\n\r\n    let editor = ace.edit(`aceEditor-${aceConfig.object.id}`);\r\n    editor.setOptions({\r\n        mode: \"ace/mode/javascript\",\r\n        theme: theme,\r\n        fontSize: `${fontSize}pt`,\r\n        showPrintMargin: false,\r\n        foldStyle: \"markbegin\",\r\n        enableBasicAutocompletion: autoCompleteState,\r\n        enableSnippets: autoCompleteState,\r\n        enableLiveAutocompletion: autoCompleteState,\r\n    });\r\n\r\n    editor.getSession().setUseWrapMode(game.settings.get(\"aceeditor\", \"lineWrap\"));\r\n\r\n    configElement.find(\".ace-editor-button\").on(\"click\", (event) => {\r\n        event.preventDefault();\r\n        if (configElement.find(\".ace-editor\").css(\"display\") === \"none\") {\r\n            configElement.find('.command textarea[name=\"command\"]').css(\"display\", \"none\");\r\n            configElement.find(\".ace-editor\").css(\"display\", \"\");\r\n            configElement.find(\".ace-editor-expand\").css(\"display\", \"\");\r\n            editor.setValue(configElement.find('.command textarea[name=\"command\"]').val(), -1);\r\n\r\n            // furnace compat\r\n            const furnace = configElement.find(\"div.furnace-macro-command\");\r\n            if (furnace.length !== 0) {\r\n                furnace.css(\"display\", \"none\");\r\n            }\r\n        } else {\r\n            configElement.find('.command textarea[name=\"command\"]').css(\"display\", \"\");\r\n            configElement.find(\".ace-editor\").css(\"display\", \"none\");\r\n            configElement.find(\".ace-editor-expand\").css(\"display\", \"none\");\r\n\r\n            // furnace compat\r\n            const furnace = configElement.find(\"div.furnace-macro-command\");\r\n            if (furnace.length !== 0) {\r\n                furnace.css(\"display\", \"\");\r\n                furnace.trigger(\"change\");\r\n            }\r\n        }\r\n    });\r\n\r\n    editor.setValue(configElement.find('textarea[name=\"command\"]').val(), -1);\r\n\r\n    editor.getSession().on(\"change\", () => {\r\n        configElement.find('textarea[name=\"command\"]').val(editor.getSession().getValue());\r\n    });\r\n\r\n    editor.commands.addCommand({\r\n        name: \"Save\",\r\n        bindKey: { win: \"Ctrl-S\", mac: \"Command-S\" },\r\n        exec: () => configElement.find(\"form.editable\").trigger(\"submit\"),\r\n    });\r\n\r\n    editor.commands.addCommand({\r\n        name: \"Execute\",\r\n        bindKey: { win: \"Ctrl-E\", mac: \"Command-E\" },\r\n        exec: () => configElement.find(\"button.execute\").trigger(\"click\"),\r\n    });\r\n\r\n    // watch for resizing of editor\r\n    new ResizeObserver(() => {\r\n        editor.resize();\r\n        editor.renderer.updateFull();\r\n    }).observe(editor.container);\r\n\r\n    createAceConfigHook(aceConfig.id, editor);\r\n});\r\n\r\nfunction createAceConfigHook(id, editor) {\r\n    Hooks.once(\"closeAceConfig\", function (aceConfig) {\r\n        if (id === aceConfig.id) {\r\n            editor.destroy();\r\n        } else {\r\n            createAceConfigHook(id, editor);\r\n        }\r\n    });\r\n}\r\n\r\nHooks.on('init', function () {\r\n    game.aevtt= {};\r\n    CONFIG.debug.aevtt = false;\r\n    AceSettings.init();\r\n})","export class AceSettings extends FormApplication {\r\n    static init() {\r\n        game.settings.register('aevtt', 'enabled', {\r\n            name: 'Enable Ace Editor for macros.',\r\n            type: Boolean,\r\n            hint:\r\n                'If disabled you will see the default macro editor.',\r\n            scope: 'client',\r\n            config: true,\r\n            default: true,\r\n        });\r\n\r\n        game.settings.register('aevtt', 'autoComplete', {\r\n            name: 'Enable code autocomplete feature.',\r\n            type: Boolean,\r\n            scope: 'client',\r\n            config: true,\r\n            default: true,\r\n        });\r\n\r\n        game.settings.register('aevtt', 'fontSize', {\r\n            name: \"Set the Ace Editor font size.\",\r\n            type: Number,\r\n            scope: 'client',\r\n            config: true,\r\n            default: 12,\r\n        });\r\n\r\n        game.settings.register('aevtt', 'theme', {\r\n            name: \"Set your Ace Editor color/style theme.\",\r\n            type: String,\r\n            hint:\r\n                'Themes can be found at https://github.com/ajaxorg/ace/tree/master/lib/ace/theme. ' +\r\n                'Default is solarized_dark',\r\n            scope: 'client',\r\n            config: true,\r\n            default: \"solarized_dark\",\r\n        });\r\n\r\n        game.settings.register('aevtt', 'lineWrap', {\r\n            name: \"Enable line wrap\",\r\n            type: Boolean,\r\n            scope: \"client\",\r\n            config: true,\r\n            default: true,\r\n        });\r\n    }\r\n\r\n    getSettingsData() {\r\n        return {\r\n            'enabled': game.settings.get('aevtt', 'enabled'),\r\n            'autoComplete': game.settings.get('aevtt', 'autoComplete'),\r\n            'fontSize': game.settings.get('aevtt', 'fontSize'),\r\n            'theme': game.settings.get('aevtt', 'theme'),\r\n            'lineWrap': game.settings.get('aevtt', 'lineWrap'),\r\n        };\r\n    }\r\n\r\n    getData(options={}) {\r\n        let data = super.getData();\r\n        data.settings = this.getSettingsData();\r\n        return data;\r\n    }\r\n\r\n    activateListeners(html) {\r\n        super.activateListeners(html);\r\n    }\r\n\r\n    _updateObject(ev, formData) {\r\n        const data = expandObject(formData);\r\n        for (let [key, value] of Object.entries(data)) {\r\n            game.settings.set('aevtt', key, value).then(() => {\r\n                console.debug(`${vtt} | Set Ace Editor setting: ${key} to ${value}`);\r\n            });\r\n        }\r\n    }\r\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module\n__webpack_require__(\"./src/scripts/index.js\");\n// This entry module used 'exports' so it can't be inlined\n"],"sourceRoot":""}